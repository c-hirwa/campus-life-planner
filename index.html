<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Campus Life Planner</title>
    <link rel="stylesheet" href="styles/style.css" />
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <header>
        <h1>ðŸ“š Campus Life Planner</h1>
    </header>

    <nav>
        <ul role="menubar">
            <li role="none"><button role="menuitem" data-page="dashboard" class="active">Dashboard</button></li>
            <li role="none"><button role="menuitem" data-page="records">Records</button></li>
            <li role="none"><button role="menuitem" data-page="add">Add Task</button></li>
            <li role="none"><button role="menuitem" data-page="settings">Settings</button></li>
            <li role="none"><button role="menuitem" data-page="about">About</button></li>
        </ul>
    </nav>

    <main id="main">
        <!-- Dashboard Section -->
        <section id="dashboard" class="active">
            <h2>Dashboard</h2>
            
            <div role="status" aria-live="polite" id="capStatus" class="hidden"></div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Tasks</h3>
                    <div class="value" id="totalTasks">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Hours</h3>
                    <div class="value" id="totalHours">0</div>
                </div>
                <div class="stat-card">
                    <h3>Top Tag</h3>
                    <div class="value" id="topTag">-</div>
                </div>
                <div class="stat-card">
                    <h3>Last 7 Days</h3>
                    <div class="value" id="last7Days">0</div>
                </div>
            </div>

            <div class="stat-card">
                <h3>Duration Cap (hours/week)</h3>
                <div class="form-group">
                    <input type="number" id="durationCap" min="0" step="1" value="40">
                    <div id="capProgress" style="margin-top: 1rem; height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden;">
                        <div id="capBar" style="height: 100%; background: var(--accent); width: 0%; transition: width 0.3s, background 0.3s;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Records Section -->
        <section id="records">
            <h2>All Tasks</h2>

            <div class="controls">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Regex search (e.g., @study, \\d{2}:\\d{2})">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="caseInsensitive" checked>
                    <label for="caseInsensitive">Case insensitive</label>
                </div>
                <button class="secondary" id="clearSearch">Clear</button>
            </div>

            <div role="status" aria-live="polite" id="searchStatus"></div>

            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th class="sortable" data-sort="title">Title</th>
                            <th class="sortable" data-sort="dueDate">Due Date</th>
                            <th class="sortable" data-sort="duration">Duration (min)</th>
                            <th data-sort="tag">Tag</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="recordsTable">
                        <tr><td colspan="5" style="text-align: center; color: var(--text-secondary);">No tasks yet</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Add/Edit Section -->
        <section id="add">
            <h2 id="formTitle">Add New Task</h2>

            <form id="taskForm">
                <input type="hidden" id="editId">

                <div class="form-group">
                    <label for="title">Title *</label>
                    <input type="text" id="title" required>
                    <div class="error" id="titleError">Title must not have leading/trailing spaces or double spaces</div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="dueDate">Due Date * (YYYY-MM-DD)</label>
                        <input type="text" id="dueDate" placeholder="2025-10-20" required>
                        <div class="error" id="dueDateError">Date must be in format YYYY-MM-DD</div>
                    </div>

                    <div class="form-group">
                        <label for="duration">Duration (minutes) *</label>
                        <input type="text" id="duration" placeholder="60" required>
                        <div class="error" id="durationError">Must be a positive number (decimals allowed)</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="tag">Tag *</label>
                    <input type="text" id="tag" placeholder="Study" required>
                    <div class="error" id="tagError">Tag must contain only letters, spaces, or hyphens</div>
                </div>

                <div class="form-group">
                    <label for="notes">Notes</label>
                    <textarea id="notes" rows="4"></textarea>
                </div>

                <div style="display: flex; gap: 1rem;">
                    <button type="submit">Save Task</button>
                    <button type="button" class="secondary" id="cancelEdit">Cancel</button>
                </div>
            </form>
        </section>

        <!-- Settings Section -->
        <section id="settings">
            <h2>Settings</h2>

            <div class="stat-card">
                <h3>Time Unit Conversion</h3>
                <div class="form-group">
                    <label for="minutesInput">Minutes</label>
                    <input type="number" id="minutesInput" value="60" min="0">
                </div>
                <div class="form-group">
                    <label for="hoursOutput">= Hours</label>
                    <input type="text" id="hoursOutput" value="1.00" readonly>
                </div>
            </div>

            <div class="stat-card">
                <h3>Data Management</h3>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <button id="exportBtn">Export JSON</button>
                    <button class="secondary" id="importBtn">Import JSON</button>
                    <input type="file" id="importFile" accept=".json" class="hidden">
                </div>
                <div role="status" aria-live="polite" id="dataStatus"></div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about">
            <h2>About Campus Life Planner</h2>
            
            <div class="stat-card">
                <h3>Purpose</h3>
                <p>Campus Life Planner helps students organize tasks, assignments, and activities with duration tracking and tag-based organization. Built with accessibility and responsive design in mind.</p>
            </div>

            <div class="stat-card">
                <h3>Features</h3>
                <ul style="list-style-position: inside; line-height: 2;">
                    <li>Task management with duration tracking</li>
                    <li>Advanced regex search capabilities</li>
                    <li>Weekly duration cap monitoring</li>
                    <li>Data persistence with localStorage</li>
                    <li>JSON import/export functionality</li>
                    <li>Full keyboard navigation support</li>
                    <li>Mobile-responsive design</li>
                </ul>
            </div>

            <div class="stat-card">
                <h3>Contact</h3>
                <p>GitHub: <a href="https://github.com/c-hirwa" style="color: var(--accent);">github.com/c-hirwa</a></p>
                <p>Email: <a href="c.hirwa@alustudent.com" style="color: var(--accent);">c.hirwa@alustudent.com</a></p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Campus Life Planner. Built for academic purposes.</p>
    </footer>
    <script type="module" src="scripts/script.js"></script>
</body>
</html>